(self["webpackChunk"]=self["webpackChunk"]||[]).push([[447],{97636:e=>{e.exports={loading:"loading___3vACX",load:"load___vcBqD"}},1287:e=>{e.exports={box:"box___XrsTg",videoList:"videoList___3XBGv"}},70969:e=>{e.exports={box:"box___1QrkJ",tagList:"tagList___3tkAR"}},84075:e=>{e.exports={box:"box___2-xxM",info:"info___2SAq8",name:"name___2gAja",summary:"summary___Uq3Fg",remark:"remark___35Kwx",serial:"serial___3n7Us"}},15936:e=>{e.exports={player:"player___3UmjK",flashBox:"flashBox___3SRNB",playerBox:"playerBox___2bvRs",iframe:"iframe___g-pFh",playAside:"playAside___11EOQ",close:"close___2entv",open:"open___1Jhqs",iframeUnfold:"iframeUnfold___1RjHm",videoTitle:"videoTitle___3rXcF",title:"title___113UI",name:"name___2znEx",playItem:"playItem___1XE1h",active:"active___1PTVl",loading:"loading___1iD5X",content:"content___1bqJ9",label:"label___qQvDM"}},15909:e=>{e.exports={box:"box___3IU96",imgItem:"imgItem___1cxMR",bannerBox:"bannerBox___3SIWB",videoBox:"videoBox___2aRJG",smallBox:"smallBox___2nHoI"}},39285:(e,a,n)=>{"use strict";n.d(a,{Z:()=>r});var t=n(22231),s=n(85893);const r=function(e){var a=e.seoDescribe,n=e.seoKey,r=e.title;return(0,s.jsxs)(t.Helmet,{children:[r&&(0,s.jsx)("title",{children:r}),(0,s.jsx)("meta",{name:"description",content:a}),(0,s.jsx)("meta",{name:"keywords",content:n}),(0,s.jsx)("meta",{property:"og:description",content:a})]})}},28142:(e,a,n)=>{"use strict";n.d(a,{Z:()=>U});n(13062);var t=n(79294),s=n(86582),r=(n(26609),n(59858)),i=n(11849),c=n(67294),o=n(70969),l=n.n(o),d=n(73727),u=n(85893);const p=function(e){var a=e.type,n=a.name,t=a.children,s=a.id;return(0,u.jsxs)("div",{className:l().box,children:[(0,u.jsx)("h2",{children:(0,u.jsx)(d.rU,{to:"/type/".concat(s),children:n})}),(0,u.jsxs)("div",{className:l().tagList,children:[t&&t.map((function(e){return(0,u.jsx)(d.rU,{to:"/type/".concat(s,"?type=").concat(e.id),children:e.name},e.id)})),(0,u.jsx)(d.rU,{to:"/type/".concat(s),children:"\u66f4\u591a >"})]})]})};n(89032);var m=n(1635),v=n(84075),x=n.n(v),_=n(70029);const h=function(e){var a=e.video,n=a.id,t=a.name,s=a.picture,r=a.remarks,c=a.serial,o={span:6,xs:{span:8},sm:{span:8},md:{span:6},lg:{span:6},xl:{span:4}};return(0,u.jsxs)(m.Z,(0,i.Z)((0,i.Z)({className:x().box},o),{},{children:[(0,u.jsxs)(_.Z,{id:n,banner:!1,name:t,picture:s,children:[!!c&&(0,u.jsx)("span",{className:x().serial,children:c}),(0,u.jsx)("span",{className:x().remark,children:r})]}),(0,u.jsxs)("div",{className:x().info,children:[(0,u.jsx)("p",{className:[x().name,"text-overflow-ellipsis"].join(" "),children:(0,u.jsx)(d.rU,{to:"/video/detail/".concat(n),children:t})}),(0,u.jsx)("p",{className:[x().summary,"text-overflow-ellipsis"].join(" "),children:r})]})]}))},f=function(){return(0,u.jsx)("span",{style:{color:"#a9a9a9",padding:"0 8px"},children:"\u8fd8\u6ca1\u6709\u5f71\u7247\u54e6"})};var j=n(1287),y=n.n(j),g=n(5977),b=n(22231),N=n(42532),k=n(97636),S=n.n(k);const I=function(){return(0,u.jsxs)("div",{className:S().loading,children:[(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{})]})};var w=n(32523),Z=function(e){var a=e.videoData,n=e.params,t=(0,g.k6)(),s=(0,g.TH)(),c=a.page,o=a.total,l=a.pageSize,d=a.maxPage,p=o;function m(e){t.push({pathname:s.pathname,query:(0,i.Z)((0,i.Z)({},n),{},{currentPage:e})})}return o/l>d&&(p=d*l),(0,u.jsx)(r.Z,{current:Number(c),total:p,pageSize:l,showSizeChanger:!1,responsive:!0,onChange:m,style:{marginTop:"20px"},showTotal:function(){return(0,u.jsx)("span",{className:"white",children:"\u5171 ".concat(o," \u6761\u5f71\u7247")})}})},B=function(e){var a,n=e.type,r=e.video,i=e.params,o=void 0===i?null:i,l=e.dispatch,d={};d=o?(0,w.A3)(r.searchOrder,o):{};var m=JSON.stringify(d),v=r[m],x=r.loading[m],_=v,j=(0,c.useRef)(),g=(0,N.Z)(j),b=[];return(0,c.useEffect)((function(){!g||_||x||(null===n||void 0===n?void 0:n.id)&&l({type:"video/getData",params:{type:null===n||void 0===n?void 0:n.id}})}),[g]),_||(b=(0,s.Z)(Array(10).keys())),null!==(a=_)&&void 0!==a&&a.data&&(_=_.data),(0,u.jsxs)("div",{className:y().box,ref:j,children:[n&&(0,u.jsx)(p,{type:n}),(0,u.jsxs)(t.Z,{className:y().videoList,gutter:{xs:8,sm:8,md:16,lg:16},children:[x&&(0,u.jsx)(I,{}),(_||b).map((function(e){return(0,u.jsx)(h,{video:e},e.id||e)})),_&&!_.length&&(0,u.jsx)(f,{})]}),!(null===v||void 0===v||!v.total)&&(0,u.jsx)(Z,{videoData:v,params:d})]})};const U=(0,b.connect)((function(e){var a=e.video;return{video:a}}))(B)},1623:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>I});var t=n(3182),s=n(94043),r=n.n(s),i=n(5977),c=n(22231),o=n(2824),l=n(99222),d=n(73727),u=n(15936),p=n.n(u),m=n(67294),v=n(70029),x=n(41486),_=n.n(x),h=n(11067),f=n(42906),j=n(39285),y=n(85893);const g=function(e){var a=e.url;return(0,y.jsx)("iframe",{src:a,frameBorder:"0",width:"100%",height:"100%",allowFullScreen:!0})};var b=function(){var e,a=(0,i.UO)(),n=a.id,t=(0,i.TH)(),s=(0,m.useState)({}),r=(0,o.Z)(s,2),u=r[0],x=r[1],b=(0,c.useSelector)((function(e){return e.video[n]}))||{},N=(0,c.useSelector)((function(e){return e.player}))||{},k=(0,c.useSelector)((function(e){return e.global.config}))||{},S=(0,m.useState)(!1),I=(0,o.Z)(S,2),w=I[0],Z=I[1],B=(0,m.useState)({}),U=(0,o.Z)(B,2),D=U[0],O=U[1],R=(0,c.useRequest)(h.Om,{manual:!0}),q=R.run;(0,m.useEffect)((function(){if(b.players){var e=t.query.id,a=b.players.find((function(a){return!(!e||a.id!=e)||(!e||void 0)}));!a&&e&&(a=b.players[0]),a&&q(a.id),x(a)}}),[t.search,b]),(0,m.useEffect)((function(){if(b.players){var e=b.players.reduce((function(e,a){var n=a.playerR,t=a.title,s=a.url,r=a.id,i={title:t,url:s,id:r};return n.forEach((function(a){var n=a.key;n in e?e[n].push(i):e[n]=[i]})),e}),{});O(e)}}),[b.players]),(0,m.useEffect)((function(){if(null!==u&&void 0!==u&&u.id){var e=u.title,a=u.id,n=b.name,t=b.id,s=b.picture,r=b.year,i=b.doubanScore;(0,f.U)({title:e,playId:a,name:n,vodId:t,picture:s[0],year:r,doubanScore:i})}}),[u]);var E=(null===u||void 0===u?void 0:u.url)||"",T=k.globalParse||"";return null!==u&&void 0!==u&&u.playerR&&N[null===(e=u.playerR[0])||void 0===e?void 0:e.key]&&(T=N[u.playerR[0].key].parse||""),(0,y.jsxs)("div",{children:[(0,y.jsx)(j.Z,{title:"".concat(b.name||"").concat(u.title||"","-\u5b8c\u6574\u7248\u89c6\u9891\u5728\u7ebf\u89c2\u770b-").concat(k.siteName||""),seoDescribe:"".concat(b.name||"","\uff0c\u662f\u7531").concat(b.director||"","\u5bfc\u6f14\uff0c\u7531").concat(b.actor||"","\u7b49\u4e3b\u6f14\u7684\u5f71\u7247\uff0c\u4e8e").concat(b.year||"","\u4e0a\u6620\u3002\u5f71\u7247\u5267\u60c5\uff1a").concat(b.content||""),seoKey:"".concat(b.name||"","\uff0c\u7535\u89c6\u5267\u5168\u96c6\uff0c\u7535\u89c6\u5267\u5927\u5168\uff0c\u5728\u7ebf\u89c2\u770b\uff0c\u5b8c\u6574\u7248")}),(0,y.jsxs)("div",{className:p().player,children:[(0,y.jsx)("div",{className:p().flashBox,children:(0,y.jsxs)("div",{className:[p().iframe,w?p().iframeUnfold:""].join(" "),children:[(0,l.isBrowser)()&&E&&"/"!=E&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(g,{url:"".concat(T).concat(E)})}),(!E||"/"==E)&&(0,y.jsxs)("div",{className:p().loading,children:[(0,y.jsx)("div",{children:"\u8fde\u63a5\u6210\u529f,\u7a0d\u7b49\u6570\u636e\u6b63\u5728\u7f13\u51b2\u4e2d..."}),(0,y.jsx)("img",{src:_(),alt:"loading"})]}),w&&(0,y.jsx)("div",{className:p().open,onClick:function(){return Z(!1)}}),!w&&(0,y.jsx)("div",{className:p().close,onClick:function(){return Z(!0)}})]})}),(0,y.jsxs)("div",{className:p().playAside,style:{display:w?"none":"block"},children:[(0,y.jsxs)("div",{className:p().videoTitle,children:[(null===b||void 0===b?void 0:b.picture)&&(0,y.jsx)(v.Z,{id:n,banner:!1,name:b.name,picture:null===b||void 0===b?void 0:b.picture[0],playing:!0}),(0,y.jsxs)("div",{className:p().title,children:[(0,y.jsx)("div",{className:p().name,children:b.name}),(0,y.jsxs)("p",{children:["\u8bc4\u5206\uff1a",b.doubanScore]}),(0,y.jsxs)("p",{children:["\u72b6\u6001\uff1a",b.remarks]}),(0,y.jsxs)("p",{children:["\u5e74\u4ee3\uff1a",b.year]}),(0,y.jsxs)("p",{children:["\u5bfc\u6f14\uff1a",b.director]}),(0,y.jsxs)("p",{children:["\u6f14\u5458\uff1a",b.actor]}),(0,y.jsxs)("p",{children:["\u5730\u533a\uff1a",b.area]}),(0,y.jsxs)("p",{children:["\u7c7b\u578b\uff1a",b.vod_class]})]})]}),(0,y.jsxs)("div",{className:p().playerBox,children:[Object.keys(D).map((function(e,a){var n=D[e],s=N[e]||{name:"\u5728\u7ebf\u64ad\u653e".concat(a+1),tips:""};return(0,y.jsxs)("div",{className:p().playerList,children:[(0,y.jsxs)("div",{className:p().playerInfo,children:[(0,y.jsx)("span",{children:s.name}),(0,y.jsx)("span",{children:s.tips})]}),(0,y.jsx)("div",{className:p().playList,children:n.map((function(e,a){return(0,y.jsx)(d.rU,{to:"".concat(t.pathname,"?id=").concat(e.id),className:[p().playItem,u.id==e.id?p().active:""].join(" "),children:e.title},a)}))})]},e)})),!Object.keys(D||{})&&(0,y.jsx)("div",{className:"smile_tips",children:"\u8fd8\u6ca1\u6709\u627e\u5230\u64ad\u653e\u5730\u5740"})]})]})]}),(0,y.jsxs)("div",{className:p().content,children:[(0,y.jsx)("em",{className:p().label,children:"\u7b80\u4ecb\uff1a"}),b.content]})]})};const N=b;var k=n(28142),S=function(){var e=(0,i.UO)(),a=e.id,n=(0,c.useDispatch)(),t=(0,c.useSelector)((function(e){return e.video})),s=t.lastKey||"{}";return(0,m.useEffect)((function(){if(!t.lastKey&&t[a]){var e={type:t[a].typeId,currentPage:1};n({type:"video/getData",params:e}),s=JSON.stringify(e)}})),(0,y.jsxs)("div",{children:[(0,y.jsx)(N,{}),(0,y.jsx)(k.Z,{params:JSON.parse(s)})]})};S.getInitialProps=function(){var e=(0,t.Z)(r().mark((function e(a){var n,t;return r().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.match.params.id,t=a.store.getState(),t.loading.models.video){e.next=5;break}return e.next=5,a.store.dispatch({type:"video/getVideoData",videoId:n});case 5:if(t.loading.models.player){e.next=8;break}return e.next=8,a.store.dispatch({type:"player/getData"});case 8:return e.abrupt("return",a.store.getState());case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();const I=S},42906:(e,a,n)=>{"use strict";n.d(a,{v:()=>t,U:()=>s});var t=function(){var e=window.localStorage.getItem("watch_recrod_key");return e?JSON.parse(e):[]},s=function(e){var a=t().filter((function(a){return a.playId!=e.playId&&a.vodId!=e.vodId}));return a.unshift(e),window.localStorage.setItem("watch_recrod_key",JSON.stringify(a))}},70029:(e,a,n)=>{"use strict";n.d(a,{Z:()=>d});var t=n(2824),s=n(67294),r=n(73727),i=n(15909),c=n.n(i),o=function(e){if(!e||!e.cdn)return(null===e||void 0===e?void 0:e.pic)||(null===e||void 0===e?void 0:e.url)||"/";var a=e.cdn,n=a.r.path,t=a.path;return"".concat("https://cdn.jsdelivr.net/","gh/").concat(n,"@main/").concat(t)},l=n(85893);const d=function(e){var a=e.id,n=e.name,i=void 0===n?"":n,d=e.banner,u=void 0===d||d,p=e.children,m=e.picture,v=e.playing,x=void 0!==v&&v,_=e.query,h=void 0===_?{}:_,f=(0,s.useState)({}),j=(0,t.Z)(f,2),y=j[0],g=j[1];return(0,s.useEffect)((function(){setTimeout((function(){g({backgroundImage:"url(".concat(o(m),")")})}),100)})),(0,l.jsxs)("div",{className:[c().box,u?c().bannerBox:c().videoBox].join(" "),children:[a&&(0,l.jsx)(r.rU,{to:{pathname:"/video/detail/".concat(a),query:h},title:i,style:y,className:[c().imgItem,x?"playing":""].join(" "),children:p}),!a&&(0,l.jsx)(s.Fragment,{children:p})]})}},41486:(e,a,n)=>{e.exports=n.p+"static/play-loading.a110de6e.gif"}}]);